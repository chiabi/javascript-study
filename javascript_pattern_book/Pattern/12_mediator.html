<!DOCTYPE html>
<html lang="ko-KR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>디자인패턴 : 중재자, mediator</title>
</head>
<body>
    <script>
    // ***중재자 패턴 : 여러 객체들을 관리하는 패턴

    // 베스파시아누스는 능력을 인정받아 유대인 반란 진압 사령관으로 임명된다.
    // 요세푸스라는 사람이 로마인과 유대인 사이에 중재자 역할을 하여 갈등을 해결하는 데 도움을 준다.
    var Josephus = (function(){
        function Josephus() {
            // participants: 참석자
            this.participants = [];
        }
        Josephus.prototype.register = function(participant) {
            this.participants.push(participant);
        };
        Josephus.prototype.deliver = function(sender, message) {
            this.participants.forEach(function(participant) {
                if (participant !== sender) {
                    console.log(sender + '님이 ' + participant + '님에게 "' + message + '"라고 말했다.');
                }
            });
        };
        return Josephus;
    })();

    var josephus = new Josephus();
    josephus.register('Jew');
    josephus.register('Roman');
    josephus.deliver('Jew', '우리 땅에서 물러가라');    // Jew님이 Roman님에게 "우리 땅에서 물러가라"라고 말했다.
    josephus.deliver('Roman', '네놈들을 멸망시켜주겠다.');  // Roman님이 Jew님에게 "네놈들을 멸망시켜주겠다."라고 말했다.

    // ***중재자 패턴
    // 여러 개의 객체들을 모두 관리하는 관제탑 같은 역할, 등록된 객체들의 상황을 통제하고 관리할 수 있다.
    // 중재자로서의 역할도 수행
    // e.g.
    // 채팅방, 자원분배기, 가계부 같은 것에 이 패턴을 사용할 수 있다.
    // 등록된 통장이나, 카드 등의 잔액을 한번에 관리할 수도 있다.
    </script>
</body>
</html>