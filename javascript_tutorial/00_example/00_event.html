<!DOCTYPE html>
<html lang="ko-KR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Event</title>
</head>
<body>
    <button id="myButton">CLICK ME</button>
    <button id="foo">FOO</button>
    <script>
        var elem = document.getElementById('myButton');
        elem.addEventListener('click', function(){
            console.log('Clicked!!');
        });

        // 이벤트 핸들러 : 이벤트가 발생하기 전에 실행되지 않다가 이벤트 발생되면 실행되도록 이벤트가 연결된 함수

        // 브라우저는 단일 쓰레드(single-thread)에서 이벤트 드리븐(event-driven) 방식으로 동작함

        // 단일 쓰레드 : 쓰레드가 하나이다. 하나의 작업(task)만을 처리할 수 있다.
        // 하지만 웹 애플리케이션은 많은 task가 동시에 처리되는 것처럼 느껴지는데, 
        // 자바스크립트의 동시성을 지원하는 것이 이벤트 루프(Event Loop)

        // ajax, DOM Events, Timer(setTimeout(), setInterval()의 콜백함수)는 Event Queue(Task Queue)에 보관되었다가
        // 특정시점(call stack이 비어져있을때) 이벤트 루프에 의해 순차적으로 call stack으로 이동되어 실행된다.
        function func1() {
            console.log('func1');
            func2();
        }
        function func2() {
            // setTimeout(function() {
            //     console.log('func2');
            // }, 0);
            var elem = document.getElementById('foo');
            elem.addEventListener('click', function(){
                this.style.backgroundColor = 'indigo';
                console.log('func2');
            });
            func3();
        }
        function func3() {
            console.log('func3');
        }

        func1(); // func1 func3 func2

    </script>

    <script>
        /// ***이벤트 바인딩(Event Bindings)
        // + HTML Event Handler: HTML 이벤트 어트리뷰트에 이벤트 핸들러를 대응 (사용을 지양함)
        // + 전통적(Traditional) DOM Event Handler : 이벤트 핸들러에 하나의 함수만을 바인딩할 수 있으며 함수에 인수를 전달할 수 없음
        // + DOM Level 2 Event Listener : `addEventListener()`사용, 대상요소에 이벤트를 바인딩하고 해당 이벤트가 발생시 실행될 콜백함수를 지정

        // addEventListenter()
        // + 하나의 이벤트에 대해 하나 이상의 핸들러 추가
        // + 캡처링과 버블링 지원
        // + HTML 요소뿐만아니라 모든 DOM 요소에 동작함
        // + IE9+ (IE8이하에서는 attachEvent())사용
        // if (elem.addEventListener) {
        //     elem.addEventListener('click', func);
        // } else if (elem.attachEvent) {
        //     elem.attachEvent('onclick', func);
        // }

        // addEventListener('click', function() {
        //     alert('Clicked');
        // });

        // 대상요소(target)를 지정하지 않으면 click 이벤트는 전역객체 window에 바인딩된다.
    </script>

    
    <div>
        <label for="username">User name</label>
        <input type="text" id="username">
        <script>
            var elem = document.getElementById('username');
            elem.addEventListener('blur', function() {
                alert('blur event occurred');
            });
            // input 요소를 blur 이벤트에 바인딩하였다.
        </script>
    </div>
</body>
</html>